{"id":"node_modules/@bikeshaving/crank/esm/dom.js","dependencies":[{"name":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/dom.js.map","includedInParent":true,"mtime":1587136189624},{"name":"/Users/ianschwartz/crank-boilerplate/package.json","includedInParent":true,"mtime":1587136220963},{"name":"/Users/ianschwartz/crank-boilerplate/.babelrc","includedInParent":true,"mtime":1587136213417},{"name":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/package.json","includedInParent":true,"mtime":1587136189624},{"name":"./_tslib-21ac4f0e.js","loc":{"line":1,"column":64},"parent":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/dom.js","resolved":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/_tslib-21ac4f0e.js"},{"name":"@repeaterjs/repeater","loc":{"line":2,"column":7},"parent":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/dom.js","resolved":"/Users/ianschwartz/crank-boilerplate/node_modules/@repeaterjs/repeater/lib/repeater.esm.js"},{"name":"event-target-shim","loc":{"line":3,"column":7},"parent":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/dom.js","resolved":"/Users/ianschwartz/crank-boilerplate/node_modules/event-target-shim/dist/event-target-shim.js"},{"name":"./index.js","loc":{"line":4,"column":42},"parent":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/dom.js","resolved":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/index.js"},{"name":"./pledge-363d33da.js","loc":{"line":5,"column":7},"parent":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/dom.js","resolved":"/Users/ianschwartz/crank-boilerplate/node_modules/@bikeshaving/crank/esm/pledge-363d33da.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderer = exports.env = exports.DOMRenderer = void 0;\n\nvar _tslib21ac4f0e = require(\"./_tslib-21ac4f0e.js\");\n\nrequire(\"@repeaterjs/repeater\");\n\nrequire(\"event-target-shim\");\n\nvar _index = require(\"./index.js\");\n\nrequire(\"./pledge-363d33da.js\");\n\nvar _a;\n\nfunction updateProps(el, props, newProps) {\n  for (var name_1 in Object.assign({}, props, newProps)) {\n    // TODO: throw an error if event props are found\n    if (name_1 === \"children\") {\n      continue;\n    }\n\n    var value = props[name_1];\n    var newValue = newProps[name_1];\n\n    if (name_1 === \"style\") {\n      if (newValue == null) {\n        el.removeAttribute(\"style\");\n      } else if (typeof newValue === \"string\") {\n        el.style.cssText = newValue;\n      } else {\n        for (var styleName in Object.assign({}, value, newValue)) {\n          var styleValue = value && value[styleName];\n          var newStyleValue = newValue && newValue[styleName];\n\n          if (newStyleValue == null) {\n            el.style.removeProperty(styleName);\n          } else if (styleValue !== newStyleValue) {\n            el.style.setProperty(styleName, newStyleValue);\n          }\n        }\n      }\n    } else if (name_1 in el) {\n      el[name_1] = newValue;\n    } else {\n      if (newValue === true) {\n        el.setAttribute(name_1, \"\");\n      } else if (newValue === false || newValue == null) {\n        el.removeAttribute(name_1);\n      } else {\n        el.setAttribute(name_1, newValue);\n      }\n    }\n  }\n} // TODO: improve this algorithm\n// https://stackoverflow.com/questions/59418120/what-is-the-most-efficient-way-to-update-the-childnodes-of-a-dom-node-with-an-ar\n\n\nfunction updateChildren(el, children) {\n  var e_1, _a, e_2, _b;\n\n  if (el.childNodes.length === 0) {\n    var fragment = document.createDocumentFragment();\n\n    try {\n      for (var children_1 = (0, _tslib21ac4f0e.a)(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {\n        var child = children_1_1.value;\n\n        if (typeof child === \"string\") {\n          child = document.createTextNode(child);\n        }\n\n        fragment.appendChild(child);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    el.appendChild(fragment);\n    return;\n  }\n\n  var oldChild = el.firstChild;\n\n  try {\n    for (var children_2 = (0, _tslib21ac4f0e.a)(children), children_2_1 = children_2.next(); !children_2_1.done; children_2_1 = children_2.next()) {\n      var newChild = children_2_1.value;\n\n      if (oldChild === null) {\n        el.appendChild(typeof newChild === \"string\" ? document.createTextNode(newChild) : newChild);\n      } else if (typeof newChild === \"string\") {\n        if (oldChild.nodeType === Node.TEXT_NODE) {\n          if (oldChild.nodeValue !== newChild) {\n            oldChild.nodeValue = newChild;\n          }\n\n          oldChild = oldChild.nextSibling;\n        } else {\n          el.insertBefore(document.createTextNode(newChild), oldChild);\n        }\n      } else if (oldChild !== newChild) {\n        el.insertBefore(newChild, oldChild);\n      } else {\n        oldChild = oldChild.nextSibling;\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (children_2_1 && !children_2_1.done && (_b = children_2.return)) _b.call(children_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  while (oldChild !== null) {\n    var nextSibling = oldChild.nextSibling;\n    el.removeChild(oldChild);\n    oldChild = nextSibling;\n  }\n}\n\nvar env = (_a = {}, _a[_index.Default] = function (tag) {\n  return function defaultDOM() {\n    var node, props, prevChildNodes, _a, _b, props1, e_3_1;\n\n    var e_3, _c;\n\n    return (0, _tslib21ac4f0e.c)(this, function (_d) {\n      switch (_d.label) {\n        case 0:\n          node = document.createElement(tag);\n          props = {};\n          prevChildNodes = [];\n          _d.label = 1;\n\n        case 1:\n          _d.trys.push([1, 6, 7, 8]);\n\n          _a = (0, _tslib21ac4f0e.a)(this), _b = _a.next();\n          _d.label = 2;\n\n        case 2:\n          if (!!_b.done) return [3\n          /*break*/\n          , 5];\n          props1 = _b.value;\n          updateProps(node, props, props1);\n\n          if (!(\"innerHTML\" in props1) && (this.childNodes.length > 0 || prevChildNodes.length > 0)) {\n            updateChildren(node, this.childNodes);\n            prevChildNodes = this.childNodes;\n          }\n\n          return [4\n          /*yield*/\n          , node];\n\n        case 3:\n          _d.sent();\n\n          props = props1;\n          _d.label = 4;\n\n        case 4:\n          _b = _a.next();\n          return [3\n          /*break*/\n          , 2];\n\n        case 5:\n          return [3\n          /*break*/\n          , 8];\n\n        case 6:\n          e_3_1 = _d.sent();\n          e_3 = {\n            error: e_3_1\n          };\n          return [3\n          /*break*/\n          , 8];\n\n        case 7:\n          try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n          } finally {\n            if (e_3) throw e_3.error;\n          }\n\n          return [7\n          /*endfinally*/\n          ];\n\n        case 8:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  };\n}, _a[_index.Portal] = function (_a) {\n  var _b, _c, newRoot, e_4_1;\n\n  var e_4, _d;\n\n  var root = _a.root;\n  return (0, _tslib21ac4f0e.c)(this, function (_e) {\n    switch (_e.label) {\n      case 0:\n        if (root == null) {\n          throw new TypeError(\"Portal element is missing root node\");\n        }\n\n        _e.label = 1;\n\n      case 1:\n        _e.trys.push([1,, 10, 11]);\n\n        _e.label = 2;\n\n      case 2:\n        _e.trys.push([2, 7, 8, 9]);\n\n        _b = (0, _tslib21ac4f0e.a)(this), _c = _b.next();\n        _e.label = 3;\n\n      case 3:\n        if (!!_c.done) return [3\n        /*break*/\n        , 6];\n        newRoot = _c.value.root;\n\n        if (newRoot == null) {\n          throw new TypeError(\"Portal element is missing root node\");\n        }\n\n        if (root !== newRoot) {\n          updateChildren(root, []);\n          root = newRoot;\n        }\n\n        updateChildren(root, this.childNodes);\n        return [4\n        /*yield*/\n        , root];\n\n      case 4:\n        _e.sent();\n\n        _e.label = 5;\n\n      case 5:\n        _c = _b.next();\n        return [3\n        /*break*/\n        , 3];\n\n      case 6:\n        return [3\n        /*break*/\n        , 9];\n\n      case 7:\n        e_4_1 = _e.sent();\n        e_4 = {\n          error: e_4_1\n        };\n        return [3\n        /*break*/\n        , 9];\n\n      case 8:\n        try {\n          if (_c && !_c.done && (_d = _b.return)) _d.call(_b);\n        } finally {\n          if (e_4) throw e_4.error;\n        }\n\n        return [7\n        /*endfinally*/\n        ];\n\n      case 9:\n        return [3\n        /*break*/\n        , 11];\n\n      case 10:\n        updateChildren(root, []);\n        return [7\n        /*endfinally*/\n        ];\n\n      case 11:\n        return [2\n        /*return*/\n        ];\n    }\n  });\n}, _a);\nexports.env = env;\n\nvar DOMRenderer =\n/** @class */\nfunction (_super) {\n  (0, _tslib21ac4f0e._)(DOMRenderer, _super);\n\n  function DOMRenderer() {\n    return _super.call(this, env) || this;\n  }\n\n  return DOMRenderer;\n}(_index.Renderer);\n\nexports.DOMRenderer = DOMRenderer;\nvar renderer = new DOMRenderer();\nexports.renderer = renderer;"},"sourceMaps":{"js":{"mappings":[],"sources":{},"lineCount":null}},"error":null,"hash":"9e65f9eb60751f3c09bb36d2432cb341","cacheData":{"env":{}}}